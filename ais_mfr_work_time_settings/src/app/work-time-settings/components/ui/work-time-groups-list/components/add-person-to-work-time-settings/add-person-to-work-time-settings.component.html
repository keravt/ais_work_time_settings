<div class="body">
  <div *ngIf="isUpdate" class="loader">
    <mat-spinner   ></mat-spinner>
  </div>

  <div class="group">
   
    <div class="header">
      <div class="title">Полная информация</div>
      <div class="group-options">
        <div (click)="chooseOption(1)" [ngClass]="{'active':option === 1}" class="group-option">
          <mat-icon fontIcon="groups"></mat-icon>
        </div>
        <div (click)="chooseOption(2)"  [ngClass]="{'active':option === 2}"  class="group-option" >
          <mat-icon fontIcon="access_time"></mat-icon>
        </div>
        <div (click)="chooseOption(3)"  [ngClass]="{'active':option === 3}"  class="group-option" >
          <mat-icon fontIcon="edit"></mat-icon>
        </div>
        
        
        <div  class="group-option" (click)="deleteWtg()" >
          <mat-icon fontIcon="delete"></mat-icon>
        </div>
        <div  class="group-option" (click)="copyWtg()" >
          <mat-icon fontIcon="content_copy"></mat-icon>
        </div>
        <div  class="group-option" (click)="openPreview()" >
          <mat-icon fontIcon="preview"></mat-icon>
        </div>
        <div  class="group-option" (click)="close()" >
          <mat-icon fontIcon="last_page"></mat-icon>
        </div>

      </div>
    </div>
    <div class="group-title">{{wtg?.title}}</div>
    <div class="group-body">
      <div  class="content" [ngClass]="{'active':option === 1}">
        <div class="persons">
          <div class="divisions">
           
      
            <mat-form-field  class="divisions-field">
              <mat-label>Подразделения</mat-label>
              <input type="text"
                     placeholder="Pick one"
                     aria-label="Number"
                     ngClass="text"
             
                     matInput
                     autofocus="false"

                     [formControl]="divionInput"
                     [matAutocomplete]="auto">
                     <mat-autocomplete   #auto="matAutocomplete">
                      <mat-option            (click)="onDivisionChange(null)"   [value]="''" >Все Подразделения</mat-option>
                      <mat-option           (click)="onDivisionChange(division)" [value]="''" *ngFor="let division of fiteredDivisions">{{division.name}} {{division.parentDivision ? '(' + division.parentDivision.name + ')' : '' }}</mat-option>
                    
                  </mat-autocomplete>
            </mat-form-field>
          </div>
          <div class="checkAll">
            <button (click)="checkAll()" mat-raised-button color="primary">Выбрать всех пользователей</button>
          </div>
          <div class="inputControll">
            <input class="input" placeholder="найти сотрудников" [formControl]="personsControl" />
          </div>
      
          <div class="persons-list">
              <mat-spinner class="loaderSettings"  *ngIf="isLoading"></mat-spinner>
              <div class="list"  *ngIf="!isLoading">
         
                  <div class="list-item-user"    *ngFor="let person of filteredPersons">
                    <mat-checkbox
                      (change)="userChecked(person.keycloakUid)"
                      class="example-margin"
                      [checked]="person.keycloakUid | isUserInWorkTimeSetting : userIds"
                      [disabled]="(person.keycloakUid | IsUserDisabledPipe : lockedUsers).include"
                      >{{ person.name }}  {{(person.keycloakUid | IsUserDisabledPipe : lockedUsers).groupName}}</mat-checkbox
                    >
                  </div>
      
      
              </div>
          </div>
        
        </div>
      </div>
      <div class="content" [ngClass]="{'active':option === 2}">
        <div class="settings">
          <div class="persons-list">
            <mat-spinner class="loaderSettings"  *ngIf="isLoadingSettings"></mat-spinner>
            <div cdkDropList class="list"  *ngIf="!isLoadingSettings" (cdkDropListDropped)="drop($event)">
         
                <div class="list-item"  cdkDrag  *ngFor="let setting of settings">
                  <mat-checkbox
                    (change)="settingChecked(setting)"
                    class="example-margin"
                    [checked]="GroupSettings | isSettingInWorkTimeGroups : setting"
                   
                    >{{ setting.title }}
                  </mat-checkbox
                  >
                </div>
             
      
            </div>
          </div>
        </div>
      </div>
      <div  class="content" [ngClass]="{'active':option === 3}">
        <div class="change-name">
          <input id="change"  class="inputTitle"  [(ngModel)]="inputValue"   matInput  placeholder="Имя">
        </div>
      </div>
    </div>
  </div>
  <div class="buttons">
    <button (click)="close()" mat-stroked-button>Закрыть</button>
    <button (click)="updateWorkTimeSetting()" mat-stroked-button>Сохранить</button>
  </div>

 </div>

